# ğŸ›¡ï¸ SugarShield - Complete Architecture & Flow Diagrams

---

## ğŸ“Š Complete App Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SUGARSHIELD APP                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚              App.jsx (Main Component)                    â”‚  â”‚
â”‚  â”‚  - Route between Onboarding & Dashboard                 â”‚  â”‚
â”‚  â”‚  - Load user data on mount                              â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                         â”‚                                       â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
â”‚         â–¼                               â–¼                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  Onboarding.jsx â”‚           â”‚  Dashboard.jsx   â”‚           â”‚
â”‚  â”‚                 â”‚           â”‚                  â”‚           â”‚
â”‚  â”‚ Screen 1: Age   â”‚           â”‚ - XP Bar         â”‚           â”‚
â”‚  â”‚ Screen 2: Heightâ”‚           â”‚ - Activity Input â”‚           â”‚
â”‚  â”‚ Screen 3: Weightâ”‚           â”‚ - Sugar Buttons  â”‚           â”‚
â”‚  â”‚ Screen 4: Genderâ”‚           â”‚ - Reward Popover â”‚           â”‚
â”‚  â”‚                 â”‚           â”‚ - History Tab    â”‚           â”‚
â”‚  â”‚ Calculate BMI   â”‚           â”‚ - Rewards Tab    â”‚           â”‚
â”‚  â”‚ Save Data       â”‚           â”‚ - Modals         â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                         â”‚                      â”‚
â”‚                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚                              â–¼                     â–¼           â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                    â”‚ Reward Popover   â”‚  â”‚ Level-Up Modal   â”‚  â”‚
â”‚                    â”‚ - Insight text   â”‚  â”‚ - Celebration    â”‚  â”‚
â”‚                    â”‚ - Action suggest â”‚  â”‚ - New level info â”‚  â”‚
â”‚                    â”‚ - XP display     â”‚  â”‚ - Confetti       â”‚  â”‚
â”‚                    â”‚ - Action button  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                              â–²                                  â”‚
â”‚                              â”‚                                  â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                    â–¼                     â–¼                     â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚         â”‚ insightEngine.js   â”‚ â”‚   storage.js       â”‚          â”‚
â”‚         â”‚                    â”‚ â”‚                    â”‚          â”‚
â”‚         â”‚ calculateRiskScore â”‚ â”‚ saveUserData()     â”‚          â”‚
â”‚         â”‚ getRecommendation  â”‚ â”‚ saveLog()          â”‚          â”‚
â”‚         â”‚                    â”‚ â”‚ saveStreak()       â”‚          â”‚
â”‚         â”‚ - Sleep Logic      â”‚ â”‚ saveXP()           â”‚          â”‚
â”‚         â”‚ - Steps Logic      â”‚ â”‚ saveDailyData()    â”‚          â”‚
â”‚         â”‚ - Time Logic       â”‚ â”‚ getUserData()      â”‚          â”‚
â”‚         â”‚ - BMI Logic        â”‚ â”‚ getLogs()          â”‚          â”‚
â”‚         â”‚                    â”‚ â”‚ getStreak()        â”‚          â”‚
â”‚         â”‚ Returns:           â”‚ â”‚ calculateBMI()     â”‚          â”‚
â”‚         â”‚ - Insight text     â”‚ â”‚                    â”‚          â”‚
â”‚         â”‚ - Action text      â”‚ â”‚ StorageKeys:       â”‚          â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ - USER_DATA        â”‚          â”‚
â”‚                                 â”‚ - LOGS             â”‚          â”‚
â”‚                                 â”‚ - STREAK           â”‚          â”‚
â”‚                                 â”‚ - XP               â”‚          â”‚
â”‚                                 â”‚ - IS_SUBSCRIBED    â”‚          â”‚
â”‚                                 â”‚ - DAILY_DATA       â”‚          â”‚
â”‚                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                         â–²                       â”‚
â”‚                                         â”‚                       â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚                          â–¼                             â–¼        â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚                    â”‚ Browser DOM â”‚            â”‚ LocalStorageâ”‚  â”‚
â”‚                    â”‚             â”‚            â”‚             â”‚  â”‚
â”‚                    â”‚ - Renders   â”‚            â”‚ - Persistentâ”‚  â”‚
â”‚                    â”‚ - Animates  â”‚            â”‚ - Sync      â”‚  â”‚
â”‚                    â”‚ - Events    â”‚            â”‚ - JSON      â”‚  â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ”„ User Interaction Flow

```
START
  â”‚
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ New User Check   â”‚
â”‚ (localStorage)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â”‚
  â”œâ”€â”€â”€â”€â”€YESâ”€â”€â”€â”€â”€â–¶ Has User Data â”€â”€â”€â”€â–¶ [Dashboard]
  â”‚
  â””â”€â”€â”€â”€â”€NOâ”€â”€â”€â”€â”€â”€â–¶ No User Data â”€â”€â”€â”€â”€â–¶ [Onboarding]
                                           â”‚
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ Age Screen  â”‚
                                    â”‚ Progress 1/4â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚Height Screenâ”‚
                                    â”‚ Progress 2/4â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚Weight Screenâ”‚
                                    â”‚ Progress 3/4â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚Gender Screenâ”‚
                                    â”‚ Progress 4/4â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚ Calculate BMIâ”‚
                                    â”‚ Save to Localâ”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                           â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  Dashboard   â”‚
                                    â”‚ (Home Tab)   â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                                    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
                                    â–¼             â–¼
                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ See Daily    â”‚  â”‚ See Quick    â”‚
                          â”‚ Activity     â”‚  â”‚ Log Buttons  â”‚
                          â”‚ - Steps      â”‚  â”‚ - ğŸµ Chai    â”‚
                          â”‚ - Sleep      â”‚  â”‚ - ğŸ¥¤ Cold    â”‚
                          â”‚              â”‚  â”‚ - ğŸ¬ Sweets  â”‚
                          â”‚ Can Update   â”‚  â”‚ - ğŸª Snack   â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚             â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
                                           â”‚
                  â”Œâ”€â”€â”€â”€â”€â”€ USER CLICKS SUGAR BUTTON â”€â”€â”€â”€â”€â”
                  â”‚                                      â”‚
                  â–¼                                      â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Calculate XP    â”‚            â”‚ Check Streak     â”‚
         â”‚ 5 + (0-5 random)â”‚            â”‚ - Day diff calc  â”‚
         â”‚ = 5-10 XP       â”‚            â”‚ - Increment/Resetâ”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚                            â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Generate Insight    â”‚
                    â”‚ via insightEngine   â”‚
                    â”‚ - Risk score calc   â”‚
                    â”‚ - Recommendation    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Save Log Entry      â”‚
                    â”‚ Save Updated XP     â”‚
                    â”‚ Save Streak         â”‚
                    â”‚ (to LocalStorage)   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Trigger Animations  â”‚
                    â”‚ - Confetti burst    â”‚
                    â”‚ - Success sound     â”‚
                    â”‚ - XP celebration    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Show Reward Popover â”‚
                    â”‚ - XP earned         â”‚
                    â”‚ - Insight text      â”‚
                    â”‚ - Action suggestion â”‚
                    â”‚ - "I'll do it!"btn  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ User Ignores    â”‚    â”‚ User Completes   â”‚
         â”‚ (time out)      â”‚    â”‚ Action           â”‚
         â”‚                 â”‚    â”‚                  â”‚
         â”‚ Close Popover   â”‚    â”‚ +10 XP Bonus     â”‚
         â”‚ Reward Removed  â”‚    â”‚ Bonus Confetti   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ Check Level-Up   â”‚
                 â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                      â”‚
                 â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚              â–¼               â–¼
                 â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚      â”‚ No New Level â”‚  â”‚ New Level!   â”‚
                 â”‚      â”‚ Continue     â”‚  â”‚ Show Modal   â”‚
                 â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ Level-Up     â”‚
                 â”‚              â”‚         â”‚ Confetti 200 â”‚
                 â”‚              â”‚         â”‚ Show Level X â”‚
                 â”‚              â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚              â”‚                â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Check Logs Count    â”‚
                    â”‚ (>= 2 && user not   â”‚
                    â”‚  subscribed)        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ < 2 Logs        â”‚    â”‚ >= 2 Logs        â”‚
         â”‚ Continue as is  â”‚    â”‚ Show Signup      â”‚
         â”‚ No modal        â”‚    â”‚ Modal            â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚ "Unlock Deeper   â”‚
                 â”‚              â”‚  Insights?"      â”‚
                 â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                      â”‚
                 â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚              â–¼               â–¼
                 â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                 â”‚      â”‚ User Clicks  â”‚  â”‚ User Clicks  â”‚
                 â”‚      â”‚ "Create Acct"â”‚  â”‚ "Maybe Later"â”‚
                 â”‚      â”‚              â”‚  â”‚              â”‚
                 â”‚      â”‚ Save Subscr  â”‚  â”‚ Close Modal  â”‚
                 â”‚      â”‚ IsSubscribed â”‚  â”‚ Continue App â”‚
                 â”‚      â”‚ Celebrate    â”‚  â”‚              â”‚
                 â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚              â”‚                â”‚
                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
                               â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Return to Dashboard â”‚
                    â”‚ - Update XP display â”‚
                    â”‚ - Update Streak     â”‚
                    â”‚ - Update History    â”‚
                    â”‚ Ready for next log  â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â–¼               â–¼               â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚ Home Tab   â”‚  â”‚History Tab â”‚  â”‚ Rewards Tabâ”‚
         â”‚ (Default)  â”‚  â”‚            â”‚  â”‚            â”‚
         â”‚ Log Sugar  â”‚  â”‚ See All    â”‚  â”‚ Level View â”‚
         â”‚ + Activity â”‚  â”‚ Logs       â”‚  â”‚ Streak Viewâ”‚
         â”‚ Inputs     â”‚  â”‚ Timestampedâ”‚  â”‚ Total XP   â”‚
         â”‚            â”‚  â”‚ Reverse    â”‚  â”‚ Stats      â”‚
         â”‚ Add Button â”‚  â”‚ Order      â”‚  â”‚ Signup CTA â”‚
         â”‚(selected)  â”‚  â”‚            â”‚  â”‚ (if not    â”‚
         â”‚            â”‚  â”‚ History    â”‚  â”‚  subscr.)  â”‚
         â”‚ History Btnâ”‚  â”‚ Button(sel)â”‚  â”‚            â”‚
         â”‚            â”‚  â”‚ Rewards Btnâ”‚  â”‚ Trophy Viewâ”‚
         â”‚ Rewards Btnâ”‚  â”‚            â”‚  â”‚ (selected) â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€ LOOP: User continues logging â”€â”€â”€â”€â”
                                                            â”‚
                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â–¼
                      (repeat from
                       sugar button click
                         section)

```

---

## ğŸ§  Insight Engine Decision Tree

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ NEW SUGAR LOG EVENT            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Calculate Risk Score           â”‚
â”‚ riskScore = 0                  â”‚
â”‚                                â”‚
â”‚ + 2 if BMI > 25                â”‚
â”‚ + 3 if Time 20:00-05:00        â”‚
â”‚ + 2 if Steps < 4000            â”‚
â”‚ + 2 if Sleep < 6 hours         â”‚
â”‚                                â”‚
â”‚ Final: 0-9 points             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PRIORITY 1: CHECK SLEEP        â”‚
â”‚ if (sleep < 6 hours) ?         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    YES  â”‚  NO
         â”‚   â”‚
         â–¼   â–¼
    [SLEEP]  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    Insight: â”‚ PRIORITY 2: CHECK ACTIVITY     â”‚
    "Low     â”‚ if (steps < 4000) ?            â”‚
    sleep    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    may..."  â”‚
    Action:  â”‚
    "Priorit-â”‚   YES   â”‚  NO
     ize..." â”‚         â”‚
            â”‚         â–¼
            â”‚    [LOW ACTIVITY]
            â”‚     Insight:
            â”‚     "Late sugar on..."
            â”‚     Action:
            â”‚     "Take 10min walk"
            â”‚         â”‚
            â”‚         â–¼
            â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚    â”‚ PRIORITY 3      â”‚
            â”‚    â”‚ Risk >= 5?      â”‚
            â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚         â”‚
            â”‚    YES  â”‚  NO
            â”‚         â”‚   â”‚
            â”‚         â–¼   â–¼
            â”‚    [HIGH RISK] [DEFAULT]
            â”‚    if BMI>25:  Insight:
            â”‚     "Current  "Good
            â”‚      BMI..."   activity"
            â”‚     Action:   Action:
            â”‚     "Swap     "Drink
            â”‚      protein" water"
            â”‚    else:
            â”‚     "High
            â”‚      risk..."
            â”‚     Action:
            â”‚     "15min
            â”‚      walk"
            â”‚         â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ RETURN RESULT       â”‚
            â”‚ {                   â”‚
            â”‚   insight: string   â”‚
            â”‚   action: string    â”‚
            â”‚ }                   â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚
                      â–¼
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚ DISPLAY IN POPOVER  â”‚
            â”‚ User sees insight   â”‚
            â”‚ + action suggestion â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ“± Tab Navigation Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DASHBOARD - TAB NAVIGATION               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   HOME TAB (ADD)    â”‚  â—„â”€â”€ DEFAULT VIEW
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â€¢ Level Progress   â”‚
â”‚  â€¢ XP Bar           â”‚
â”‚  â€¢ Daily Activity   â”‚
â”‚    - Steps Input    â”‚
â”‚    - Sleep Input    â”‚
â”‚  â€¢ Quick Log        â”‚
â”‚    - 4 Buttons      â”‚
â”‚  â€¢ Streak Display   â”‚
â”‚    (Header)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚        â”‚
    â”‚        â”‚        â””â”€â”€â”€â”€â”€â”€â”€ Click [ğŸ“ History]
    â”‚        â”‚
    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (stays on Home)
    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Click [+ Add]
                                 (refresh/focus)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  HISTORY TAB        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  "Your Shield       â”‚
â”‚   History"          â”‚
â”‚                     â”‚
â”‚  [Log 1]            â”‚
â”‚  ğŸª Snack +12 XP    â”‚
â”‚  04:32 PM â€¢ 2/12    â”‚
â”‚                     â”‚
â”‚  [Log 2]            â”‚
â”‚  ğŸ¬ Sweets +8 XP    â”‚
â”‚  04:15 PM â€¢ 2/12    â”‚
â”‚                     â”‚
â”‚  [Log 3]            â”‚
â”‚  ğŸ¥¤ Cold +10 XP     â”‚
â”‚  04:00 PM â€¢ 2/12    â”‚
â”‚                     â”‚
â”‚  [Log 4]            â”‚
â”‚  ğŸµ Chai +7 XP      â”‚
â”‚  03:45 PM â€¢ 2/12    â”‚
â”‚                     â”‚
â”‚  (Reverse order     â”‚
â”‚   newest first)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚        â”‚
    â”‚        â”‚        â””â”€â”€â”€â”€â”€â”€â”€ Click [ğŸ† Prize]
    â”‚        â”‚
    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (stays in History)
    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Click [ğŸ“ History]
                                 (refresh/focus)


â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  REWARDS TAB        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  "Trophies &        â”‚
â”‚   Milestones"       â”‚
â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ğŸ†   â”‚â”‚ ğŸ”¥   â”‚ â”‚
â”‚  â”‚LEVEL  â”‚â”‚STREAKâ”‚ â”‚
â”‚  â”‚  2    â”‚â”‚3 Daysâ”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”˜â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                     â”‚
â”‚  Achievement Stats  â”‚
â”‚  â€¢ Total XP: 147    â”‚
â”‚  â€¢ Items Logged: 7  â”‚
â”‚                     â”‚
â”‚  [Claim Your        â”‚
â”‚   Progress!]        â”‚
â”‚  (if not subscribed)â”‚
â”‚                     â”‚
â”‚  [Create Account]   â”‚
â”‚  (if not subscribed)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚        â”‚        â”‚
    â”‚        â”‚        â””â”€â”€â”€â”€â”€â”€â”€ Click [ğŸ† Prize]
    â”‚        â”‚                 (refresh/focus)
    â”‚        â”‚
    â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ (stays in Rewards)
    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Click [+ Add]
                                 (Navigate to Home)


BOTTOM NAVIGATION BAR
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [+ Add]  [ğŸ“ History]  [ğŸ† Prize]          â”‚
â”‚ (home)   (history)     (rewards)            â”‚
â”‚                                             â”‚
â”‚ Active tab has:                             â”‚
â”‚ - Blue background (#3B82F6)                 â”‚
â”‚ - White icon + text label                   â”‚
â”‚ - Shadow glow                               â”‚
â”‚                                             â”‚
â”‚ Inactive tabs have:                         â”‚
â”‚ - Slate-400 gray icon                       â”‚
â”‚ - No text label                             â”‚
â”‚ - Hover: Light slate-50 background          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ¯ Level-Up Progression Path

```
User XP Total    Level    Progress Bar     Status
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
0 XP             1        [â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0%  START
5 XP (1st log)   1        [â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 5%  Grinding
15 XP (3 logs)   1        [â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘] 15% 
35 XP (7 logs)   1        [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘] 35% Getting Close
95 XP (19 logs)  1        [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 95% Almost There
100 XP TRIGGER!  â”€ LEVEL UP! â”€
105 XP           2        [â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 5%  NEW LEVEL!
                          â—„â”€ Confetti
                          â—„â”€ Modal
                          â—„â”€ Celebration

195 XP           2        [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 95% Grinding
200 XP TRIGGER!  â”€ LEVEL UP! â”€
205 XP           3        [â–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 5%  Leveling Up!

...continues...

Every 100 XP = 1 Level Up = 1 Celebration

Challenge:
- 5-10 XP per log Ã— ~10 logs = reach next level
- Approximately 10-20 logs to level up
- With daily logs, level up every 2-3 weeks
- Encourages consistent habit formation

```

---

## ğŸ’¾ Data Persistence Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ APPLICATION STATE             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ user, streak, xp, logs,       â”‚
â”‚ dailyData, isSubscribed       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER ACTION                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ Log sugar                   â”‚
â”‚ â€¢ Update activity             â”‚
â”‚ â€¢ Click "I'll do it"          â”‚
â”‚ â€¢ Create account              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ STATE UPDATE IN REACT          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ setXP(newXP)                  â”‚
â”‚ setStreak(newStreak)          â”‚
â”‚ setLogs(updatedLogs)          â”‚
â”‚ setDailyData(updated)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CALL STORAGE METHODS           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ storage.saveXP(xp)            â”‚
â”‚ storage.saveStreak(streak)    â”‚
â”‚ storage.saveLog(log)          â”‚
â”‚ storage.saveDailyData(data)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ LOCALSTORAGE PERSISTENCE               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ localStorage.setItem(key, JSON.stringifyâ”‚
â”‚ (value))                               â”‚
â”‚                                        â”‚
â”‚ Keys stored:                           â”‚
â”‚ â€¢ sugarshield_user_data    (1 item)   â”‚
â”‚ â€¢ sugarshield_logs         (many)     â”‚
â”‚ â€¢ sugarshield_streak       (1 item)   â”‚
â”‚ â€¢ sugarshield_xp           (1 item)   â”‚
â”‚ â€¢ sugarshield_is_subscribed(bool)     â”‚
â”‚ â€¢ sugarshield_daily_data_YYYY-MM-DD   â”‚
â”‚   (1 per day)                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BROWSER LOCAL STORAGE                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Persistent across:                     â”‚
â”‚ âœ“ Browser refresh                      â”‚
â”‚ âœ“ Tab close/reopen                     â”‚
â”‚ âœ“ Multiple tabs                        â”‚
â”‚ âœ“ Offline mode                         â”‚
â”‚                                        â”‚
â”‚ NOT persistent across:                 â”‚
â”‚ âœ— Browser clear cache                  â”‚
â”‚ âœ— Private/Incognito mode               â”‚
â”‚ âœ— Different browsers                   â”‚
â”‚ âœ— Different devices                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ APP RELOAD/COLD START                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. App.jsx loads                       â”‚
â”‚ 2. useEffect runs                      â”‚
â”‚ 3. storage.getUserData() retrieves     â”‚
â”‚ 4. If userData exists:                 â”‚
â”‚    - Show Dashboard with all data      â”‚
â”‚ 5. If no userData:                     â”‚
â”‚    - Show Onboarding                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ”Š Audio Rendering Decision Tree

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USER LOGS SUGAR ITEM         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ playSuccessSound() called    â”‚
â”‚ audioSupported = true        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ TRY: Web Audio API           â”‚
â”‚ AudioContext available?      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚           â”‚
YES â”‚           â”‚ NO / ERROR
    â–¼           â–¼
[SUCCESS]  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 Tone      â”‚ CATCH BLOCK                  â”‚
 Generated â”‚ TRY: HTMLAudioElement        â”‚
 â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚ fallback method              â”‚
 C5â†’E5â†’G5  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 Ascending       â”‚           â”‚
 Notes       YES â”‚           â”‚ NO / ERROR
             â–¼   â–¼
       [SUCCESS] â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       Audio     â”‚ CATCH BLOCK (2)      â”‚
       played    â”‚ Set audioSupported   â”‚
       from URL  â”‚ = false              â”‚
                  â”‚ Silently continue    â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                  â”‚ APP CONTINUES        â”‚
                  â”‚ (Audio optional)     â”‚
                  â”‚                      â”‚
                  â”‚ Visual feedback      â”‚
                  â”‚ still plays:         â”‚
                  â”‚ - Confetti           â”‚
                  â”‚ - Popover            â”‚
                  â”‚ - XP display         â”‚
                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

```

---

## ğŸ¬ Animation Timeline

```
ACTION: User clicks sugar button
TIME ELAPSED:

T+0ms     á§Entry Animation Starts
          â”œâ”€ Confetti triggered
          â””â”€ Popover initial state: y:100, opacity:0

T+50ms    Logic processes
          â”œâ”€ XP calculated
          â”œâ”€ Streak updated
          â”œâ”€ Insight generated
          â””â”€ Audio playback starts

T+100ms   á§Popover Animates In
          â”œâ”€ y: 100 â†’ 0 (500ms duration)
          â”œâ”€ opacity: 0 â†’ 1 (500ms)
          â”œâ”€ Confetti peaks
          â””â”€ Sound reaches peak volume

T+300ms   Confetti Ends
          â””â”€ Particles settle, fade out

T+500ms   á§Popover Fully Visible
          â”œâ”€ User can see:
          â”‚  - XP earned
          â”‚  - Insight
          â”‚  - Action
          â”‚  - "I'll do it!" button
          â””â”€ Sound fades out

T+3000ms  á§Auto Dismiss (if no interaction)
          â”œâ”€ User hasn't clicked anything
          â””â”€ Popover might fade (optional)

T+ Click  User Clicks "I'll do it!"
          â”œâ”€ Bonus XP +10
          â”œâ”€ Small confetti (50pt, 40Â°)
          â”œâ”€ Check level-up
          â”‚  â”œâ”€ If level up:
          â”‚  â”‚  â””â”€ Level-up modal appears
          â”‚  â”‚     â””â”€ Large confetti (200pt, 120Â°)
          â”‚  â””â”€ If no level up:
          â”‚     â””â”€ Popover closes
          â””â”€ Return to normal

T+5000ms  Everything Returns to Normal
          â”œâ”€ Modal closes (if shown)
          â”œâ”€ Dashboard refreshed
          â”œâ”€ XP display updated
          â”œâ”€ Streak display updated
          â””â”€ History updated

Ready for next sugar log!

```

---

This completes the comprehensive architectural and flow documentation for SugarShield. All systems are now properly documented with clear visual maps of data flow, user interactions, and component relationships.

âœ… **Status: Documentation Complete**
